{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "agg_sector_activity_monthly",
  "description": "Sector-level trading patterns and buy/sell pressure analysis",
  "type": "object",
  "table_metadata": {
    "grain": "One row per sector per month",
    "partitioning": ["year(from year_month)"],
    "clustering": ["sector"],
    "update_frequency": "nightly"
  },
  "properties": {
    "year_month": {"type": "integer", "description": "YYYYMM format", "example": 202501},
    "sector": {"type": "string"},
    "unique_members": {"type": "integer", "minimum": 0},
    "total_transactions": {"type": "integer", "minimum": 0},
    "purchase_count": {"type": "integer", "minimum": 0},
    "sale_count": {"type": "integer", "minimum": 0},
    "purchase_volume_low": {"type": "integer", "minimum": 0},
    "purchase_volume_high": {"type": "integer", "minimum": 0},
    "sale_volume_low": {"type": "integer", "minimum": 0},
    "sale_volume_high": {"type": "integer", "minimum": 0},
    "net_buy_pressure_low": {"type": "integer"},
    "net_buy_pressure_high": {"type": "integer"},
    "top_5_assets": {
      "type": "array",
      "description": "Top 5 most-traded assets in sector",
      "items": {
        "type": "object",
        "properties": {
          "asset_key": {"type": "integer"},
          "asset_name": {"type": "string"},
          "transaction_count": {"type": "integer"}
        }
      }
    }
  },
  "required": [
    "year_month", "sector", "unique_members", "total_transactions",
    "purchase_count", "sale_count", "top_5_assets"
  ]
}
