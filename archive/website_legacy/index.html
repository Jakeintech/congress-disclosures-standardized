<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Congress Financial Disclosures</title>
    <meta name="description" content="Open-source database of U.S. House financial disclosure reports">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Navigation Container (Injected by nav.js) -->
        <div id="nav-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Disclaimer -->
                <div class="alert alert-warning">
                    <div class="alert-title">Legal Notice</div>
                    <div class="alert-description">
                        This data is provided for transparency and research purposes per
                        <a href="https://www.law.cornell.edu/uscode/text/5/13107" target="_blank" rel="noopener">5
                            U.S.C. ยง 13107</a>.
                        Not financial advice. No warranties.
                        <a href="https://disclosures-clerk.house.gov/" target="_blank" rel="noopener">Verify at official
                            source</a>.
                    </div>
                </div>

                <!-- Dashboard Content -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Financial Disclosure Filings</h2>
                        <p class="card-description">Browse all House member financial disclosures (Bronze Layer)</p>
                    </div>
                    <div class="card-content">
                        <!-- Stats & Charts -->
                        <div class="dashboard-grid">
                            <!-- Stats Column -->
                            <div class="stats-column">
                                <div class="stats-grid" id="bronze-stats">
                                    <div class="stat-card" title="Total number of financial disclosure documents filed">
                                        <div class="stat-value" id="bronze-total-filings">-</div>
                                        <div class="stat-label">Total Filings</div>
                                    </div>
                                    <div class="stat-card" title="Number of unique members who have filed disclosures">
                                        <div class="stat-value" id="bronze-total-filers">-</div>
                                        <div class="stat-label">Unique Filers</div>
                                    </div>
                                    <div class="stat-card" title="State with the most filings">
                                        <div class="stat-value" id="bronze-top-state">-</div>
                                        <div class="stat-label">Most Active State</div>
                                    </div>
                                    <div class="stat-card" title="Member with the most filings">
                                        <div class="stat-value" id="bronze-top-filer" style="font-size: 1.5rem;">-</div>
                                        <div class="stat-label">Top Filer</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Chart Column -->
                            <div class="chart-column">
                                <div class="chart-container" style="height: 200px; position: relative;">
                                    <canvas id="bronze-filing-types-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Filters -->
                        <div class="filters" style="margin-top: 2rem;">
                            <input type="text" id="search" placeholder="Search by name, state, or document ID..."
                                class="input">
                            <div class="filter-grid">
                                <select id="year-filter" class="select">
                                    <option value="">All Years</option>
                                </select>
                                <select id="state-filter" class="select">
                                    <option value="">All States</option>
                                </select>
                                <select id="type-filter" class="select">
                                    <option value="">All Filing Types</option>
                                    <option value="A">Annual</option>
                                    <option value="N">New Member</option>
                                    <option value="T">Termination</option>
                                    <option value="P">Periodic Transaction</option>
                                </select>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="loading" class="loading-state">
                            <div class="spinner"></div>
                            <p>Loading financial disclosure data...</p>
                        </div>

                        <!-- Error State -->
                        <div id="error" class="error-state hidden">
                            <p>Unable to load data. <a href="https://disclosures-clerk.house.gov/"
                                    target="_blank">Verify at
                                    official source</a>.</p>
                        </div>

                        <!-- Data Table -->
                        <div id="data-section" class="data-section hidden">
                            <div class="table-actions">
                                <span id="showing-count" class="text-muted">Showing 0 of 0 filings</span>
                                <button id="export-csv" class="btn btn-secondary">Export CSV</button>
                            </div>

                            <div class="table-container">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th data-sort="year">Year</th>
                                            <th data-sort="filing_date">Filing Date</th>
                                            <th data-sort="last_name">Name</th>
                                            <th data-sort="state_district">State/District</th>
                                            <th data-sort="filing_type">Type</th>
                                            <th data-sort="doc_id">Document ID</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table-body">
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <div class="pagination" id="pagination">
                                <button id="prev-page" class="btn btn-ghost" disabled>Previous</button>
                                <span id="page-info" class="text-muted">Page 1 of 1</span>
                                <button id="next-page" class="btn btn-ghost" disabled>Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <p>
                        Open-source project for government transparency.
                        <a href="https://github.com/Jakeintech/congress-disclosures-standardized" target="_blank">View
                            on GitHub</a> |
                        <a href="https://disclosures-clerk.house.gov/" target="_blank">Official Source</a>
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script src="config.js"></script>
    <script src="nav.js"></script>
    <script src="dashboard.js"></script>
</body>

</html>